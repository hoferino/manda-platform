# Sprint Status - Manda Platform Implementation
# Generated: 2025-11-28
# Last Updated: 2025-11-28
# Project: Manda
# Tracking System: file-system
# Story Location: docs/sprint-artifacts

# ===================
# BUSINESS PRINCIPLES
# ===================
# Core principles that guide sprint planning and execution
principles:
  - id: BP-001
    title: Zero Technical Debt Policy
    established: 2025-11-28
    description: |
      We do not carry unnecessary technical debt between sprints.
      All identified tech debt items must be addressed before starting new feature epics.
      Rationale: Accumulated debt slows velocity, increases bug risk, and compounds over time.
      Implementation:
      - Backlog items from retrospectives are resolved in dedicated tech debt sprints
      - New epics cannot begin until backlog is clear or explicitly deferred with justification
      - Code review includes tech debt assessment

# ===================
# TECH DEBT SPRINT
# ===================
# Sprint dedicated to resolving backlog items before Epic 4
tech_debt_sprint:
  name: "Tech Debt Resolution Sprint"
  started: 2025-11-28
  completed: 2025-11-28
  target_completion: 2025-11-29
  status: done
  goal: Clear all medium/high priority backlog items before Epic 4
  retrospective: docs/sprint-artifacts/retrospectives/tech-debt-sprint-retrospective.md
  summary: |
    All 3 stories completed in single session. TD-002 (rate limiting) deferred per BP-001.
    Key deliverables:
    - Playwright E2E testing infrastructure with 15 Data Room tests
    - Vitest parallel execution with 3-way CI sharding (41s → ~3s/shard)
    - Shared Supabase test utilities reducing test boilerplate
    - CI pipeline with lint, unit tests (sharded), E2E tests, and build stages
  stories:
    - id: TD-001
      backlog_ref: BL-001
      title: Add E2E tests for Data Room
      status: done
      priority: medium
      estimate: 4h
      completed: 2025-11-28
      scope: |
        - Set up Playwright in manda-app
        - Write E2E tests for document upload flow
        - Write E2E tests for folder/bucket operations
        - Add to CI pipeline
      deliverables: |
        - playwright.config.ts - Playwright configuration with Chromium
        - e2e/auth.setup.ts - Authentication setup for E2E tests
        - e2e/data-room.spec.ts - Comprehensive E2E tests for Data Room:
          * Folder operations: create, rename, delete, breadcrumb navigation
          * Document upload: single file, folder upload, progress tracking
          * View toggle: Folders/Buckets views with preference persistence
          * Drag and drop: move documents to folders
          * Processing status: display and realtime connection
        - .github/workflows/ci.yml - CI pipeline with unit tests, E2E tests, and build
        - Added data-testid attributes to key components for reliable test selection
        - npm scripts: test:e2e, test:e2e:ui, test:e2e:headed, test:e2e:report

    - id: TD-003
      backlog_ref: BL-004
      title: Implement test sharding / parallel execution
      status: done
      priority: medium
      estimate: 2h
      completed: 2025-11-28
      scope: |
        - Configure Vitest for parallel test execution
        - Set up test sharding for CI (split by file)
        - Target: <60s full test run
      deliverables: |
        - vitest.config.ts: Updated with thread pool parallelization
          * pool: 'threads' for multi-core execution
          * Test isolation for reliability
          * CI-optimized reporters (dot + JSON)
        - .github/workflows/ci.yml: Updated with 3-way test sharding
          * Tests split across 3 parallel runners
          * Each shard ~3s instead of 41s total
          * fail-fast: false for complete results
        - Performance improvement:
          * Full run: 41s (local)
          * Per shard: ~3s (CI will run 3 in parallel)

    - id: TD-004
      backlog_ref: BL-005
      title: Create shared Supabase test utilities
      status: done
      priority: medium
      estimate: 2h
      completed: 2025-11-28
      scope: |
        - Create __tests__/utils/supabase-mock.ts
        - Standardize mock patterns across components
        - Refactor existing tests to use shared utilities
      deliverables: |
        - __tests__/utils/supabase-mock.ts: Comprehensive Supabase test utilities
          * MockQueryBuilder interface with chainable methods (from, select, eq, order, etc.)
          * MockSupabaseAuth interface (getUser, getSession, signIn, signOut, onAuthStateChange)
          * MockSupabaseClient interface combining query builder, auth, and realtime
          * createMockSupabaseClient() - returns client + individual mock references
          * mockSupabaseModule() - for vi.mock('@/lib/supabase/client')
          * mockSupabaseServerModule() - for server-side Supabase mocking
          * Data factories: createMockUser, createMockDocument, createMockProject, createMockFolder
          * Helper functions: mockQuerySuccess, mockQueryError, mockAuthenticatedUser, mockUnauthenticated
        - Refactored buckets-view-integration.test.tsx to use shared utilities
          * Replaced inline mock with createMockSupabaseClient()
          * Uses createMockDocument/createMockFolder data factories
          * All 4 tests passing

# Deferred items (low priority - will address in future sprints)
deferred_backlog:
  - id: BL-002
    title: Add rate limiting on document endpoints
    priority: medium
    defer_reason: Could block power users during heavy due diligence. Revisit before production launch.

  - id: BL-003
    title: Monitor GCS costs as usage grows
    priority: low
    defer_reason: No production traffic yet, will address before launch

  - id: BL-006
    title: Error message consistency catalog
    priority: low
    defer_reason: Nice-to-have, can address incrementally

  - id: BL-007
    title: Pipeline visualization tool
    priority: low
    defer_reason: Current logging sufficient for MVP debugging

# ===================
# BACKLOG ITEMS
# ===================
# Technical debt and action items from retrospectives
backlog:
  # From Epic 2 Retrospective (2025-11-26)
  - id: BL-001
    title: Add E2E tests for Data Room
    priority: medium
    source: epic-2-retrospective
    description: |
      No Playwright/Cypress E2E tests were created during Epic 2.
      Manual verification worked but doesn't scale.
      Consider adding E2E test story or including in DoD.

  - id: BL-002
    title: Add rate limiting on document endpoints
    priority: medium
    source: epic-2-retrospective
    description: |
      Document upload and download endpoints lack rate limiting.
      Required for production readiness to prevent abuse.
      Consider using middleware or API gateway.

  - id: BL-003
    title: Monitor GCS costs as usage grows
    priority: low
    source: epic-2-retrospective
    description: |
      Google Cloud Storage costs should be monitored as document volume increases.
      Set up billing alerts and consider lifecycle policies for old documents.

  # From Epic 3 Retrospective (2025-11-28)
  - id: BL-004
    title: Test sharding / parallel execution
    priority: medium
    source: epic-3-retrospective
    description: |
      550+ tests causing slower CI runs.
      Implement test sharding or parallel execution.

  - id: BL-005
    title: Shared Supabase test utilities
    priority: medium
    source: epic-3-retrospective
    description: |
      Mocking Supabase client required repetitive setup across tests.
      Create shared test utilities for consistency.

  - id: BL-006
    title: Error message consistency catalog
    priority: low
    source: epic-3-retrospective
    description: |
      Some error messages are technical, others user-friendly.
      Create catalog for consistency (potential i18n foundation).

  - id: BL-007
    title: Pipeline visualization tool
    priority: low
    source: epic-3-retrospective
    description: |
      5-stage pipeline is complex to debug.
      Consider enhanced logging or visualization tool.

# generated: 2025-11-28
# project: Manda
# project_key: manda-platform
# tracking_system: file-system
# story_location: docs/sprint-artifacts

# STATUS DEFINITIONS:
# ==================
# Epic Status:
#   - backlog: Epic exists in epic file but not contexted
#   - contexted: Epic tech context created (required before drafting stories)
#   - done: All stories in epic completed
#
# Story Status:
#   - backlog: Story only exists in epic file
#   - drafted: Story file created in stories folder
#   - ready-for-dev: Draft approved and story context created
#   - in-progress: Developer actively working on implementation
#   - review: Under SM review (via code-review workflow)
#   - done: Story completed
#
# Retrospective Status:
#   - optional: Can be completed but not required
#   - completed: Retrospective has been done
#
# WORKFLOW NOTES:
# ===============
# - Epics should be 'contexted' before stories can be 'drafted'
# - Stories can be worked in parallel if team capacity allows
# - SM typically drafts next story after previous one is 'done' to incorporate learnings
# - Dev moves story to 'review', SM reviews, then Dev moves to 'done'

generated: 2025-11-28
project: Manda
project_key: manda-platform
tracking_system: file-system
story_location: docs/sprint-artifacts

development_status:
  # Epic 1: Project Foundation (9 stories) - COMPLETED 2025-11-25
  epic-1: done
  epic-1-jira-id: SCRUM-10
  epic-1-completed: 2025-11-25
  epic-1-notes: |
    All 9 stories completed. Key deliverables:
    - Next.js 15 with shadcn/ui, Tailwind CSS, TypeScript
    - Supabase Auth with SSR middleware, protected routes
    - PostgreSQL schema with RLS policies for multi-tenant isolation
    - Projects overview with search, filter, and pagination
    - 2-step project creation wizard (simplified from 3-step)
    - Project workspace shell with sidebar navigation
    - Neo4j graph database integration
    - pg-boss job queue with health monitoring
    - Audit logging for security events
    Architecture decisions:
    - Document storage: Google Cloud Storage (GCS) - decided for Epic 2
    - Test infrastructure: Vitest + React Testing Library (19 tests)
    - Error boundaries: Hierarchical error handling with recovery
  e1-1-set-up-nextjs-15-project-with-shadcnui: done
  e1-1-jira-id: SCRUM-11
  e1-2-configure-supabase-auth-and-database-connection: done
  e1-2-jira-id: SCRUM-12
  e1-3-create-postgresql-schema-with-rls-policies: done
  e1-3-jira-id: SCRUM-13
  e1-4-build-projects-overview-screen-landing: done
  e1-4-jira-id: SCRUM-14
  e1-5-implement-project-creation-wizard: done
  e1-5-jira-id: SCRUM-15
  e1-6-build-project-workspace-shell-with-navigation: done
  e1-6-jira-id: SCRUM-16
  e1-7-configure-neo4j-graph-database: done
  e1-7-jira-id: SCRUM-17
  e1-8-configure-pg-boss-job-queue: done
  e1-8-jira-id: SCRUM-18
  e1-9-implement-audit-logging-for-security-events: done
  e1-9-jira-id: SCRUM-19
  epic-1-retrospective: completed

  # Epic 2: Document Ingestion & Storage (8 stories) - COMPLETED 2025-11-26
  # Uses GCS (architecture decision 2025-11-25)
  # COURSE CORRECTION v2.6 (2025-11-26):
  # - Unified bucket/folder model: folder_path is single source of truth
  # - Buckets = top-level folders (same data, different view)
  # - Removed deal_type from wizard (didn't drive behavior)
  # - Empty projects have empty data rooms (no default buckets)
  # - Removed category column from documents table
  # COURSE CORRECTION v2.7 (2025-11-28):
  # - Persistent folder storage with folders table
  # - Bug fixes: Buckets tab click, New Bucket button
  epic-2: done
  epic-2-jira-id: SCRUM-21
  epic-2-completed: 2025-11-26
  e2-1-implement-document-upload-to-google-cloud-storage: done
  e2-1-jira-id: SCRUM-22
  e2-1-completed: 2025-11-25
  e2-2-build-data-room-folder-structure-view: done
  e2-2-completed: 2025-11-25
  e2-2-jira-id: SCRUM-23
  e2-3-build-data-room-buckets-view-category-based: done
  e2-3-completed: 2025-11-25
  e2-3-jira-id: SCRUM-24
  e2-3-refactored: 2025-11-26  # v2.6: Refactored to derive buckets from folder_path, removed hardcoded categories
  e2-4-implement-view-toggle-and-user-preference: done
  e2-4-jira-id: SCRUM-25
  e2-4-completed: 2025-11-26
  e2-5-create-document-metadata-management: done
  e2-5-jira-id: SCRUM-26
  e2-5-completed: 2025-11-26
  e2-6-implement-document-actions-view-download-delete: done
  e2-6-jira-id: SCRUM-27
  e2-6-completed: 2025-11-26
  e2-6-reviewed: 2025-11-26
  e2-7-build-upload-progress-indicators-and-websocket-updates: done
  e2-7-jira-id: SCRUM-28
  e2-7-completed: 2025-11-26
  e2-8-implement-irl-integration-with-document-tracking: done
  e2-8-jira-id: SCRUM-29
  e2-8-completed: 2025-11-26
  epic-2-retrospective: completed
  epic-2-notes: |
    All 8 stories completed. Key deliverables:
    - Google Cloud Storage integration with signed URLs
    - Data Room with Folder and Bucket views (unified model)
    - Virtual folders derived from folder_path (no separate table)
    - Drag-and-drop document management
    - Upload progress with Zustand store and parallel uploads
    - IRL Checklist panel for document tracking
    - 135 tests (7x growth from Epic 1)
    Architecture decisions:
    - Buckets = top-level folders (v2.6 course correction)
    - XHR for upload progress (Fetch API limitation)
    - Zustand + localStorage for upload persistence

  # Epic 3: Intelligent Document Processing (9 stories) - COMPLETED 2025-11-28
  # CONTEXTED: 2025-11-26
  # Tech Spec: docs/sprint-artifacts/tech-spec-epic-E3.md
  # Key Decisions:
  # - FastAPI Python backend (manda-processing service)
  # - Tiered Gemini 2.5: Flash (extraction), Pro (deep analysis), Flash-Lite (batch)
  # - pgvector for embeddings (staying with Supabase for MVP)
  # - Docling for document parsing with OCR
  # - 3 new tables: document_chunks, findings, financial_metrics
  epic-3: done
  epic-3-jira-id: SCRUM-30
  epic-3-contexted: 2025-11-26
  epic-3-completed: 2025-11-28
  epic-3-tech-spec: docs/sprint-artifacts/tech-spec-epic-E3.md
  e3-1-set-up-fastapi-backend-with-pg-boss-job-queue: done
  e3-1-jira-id: SCRUM-31
  e3-1-drafted: 2025-11-26
  e3-1-context-ready: 2025-11-26
  e3-1-completed: 2025-11-26
  e3-1-reviewed: 2025-11-26
  e3-1-notes: |
    FastAPI backend created with pg-boss job queue integration.
    79 tests passing with 93% coverage. Python 3.12+ required.
    Direct SQL approach for pg-boss compatibility with TypeScript.
    Code review APPROVED - all 6 ACs verified, no HIGH/MEDIUM issues.
  e3-2-integrate-docling-for-document-parsing: done
  e3-2-jira-id: SCRUM-32
  e3-2-drafted: 2025-11-26
  e3-2-completed: 2025-11-26
  e3-2-reviewed: 2025-11-26
  e3-2-notes: |
    Docling integration completed with comprehensive parser module.
    136 tests passing (24 skipped for docling-dependent tests).
    Coverage: chunker.py 87%, excel_parser.py 89%, __init__.py 96%.
    Code review APPROVED - all 6 ACs verified, no HIGH/MEDIUM blocking issues.
    Key deliverables:
    - Parser interface with Pydantic models (ChunkData, TableData, FormulaData, ParseResult)
    - Excel parser with formula preservation (openpyxl)
    - PDF parser with OCR support (Docling)
    - Semantic chunking (512-1024 tokens, tiktoken)
    - Documentation at manda-processing/docs/parsers.md
  e3-3-implement-document-parsing-job-handler: done
  e3-3-jira-id: SCRUM-33
  e3-3-drafted: 2025-11-26
  e3-3-completed: 2025-11-27
  e3-3-notes: |
    Document parsing job handler completed. Key deliverables:
    - ParseDocumentHandler class with GCS download, parsing, DB storage
    - Webhook endpoint for triggering parse jobs (/webhooks/document-uploaded)
    - Atomic transaction: store chunks + update status in single transaction
    - Error handling: GCS errors, parse errors, DB errors with retry classification
    - 137 tests passing with 84% coverage on new code
    Key files:
    - src/jobs/handlers/parse_document.py - Main handler
    - src/storage/gcs_client.py - GCS download with retry
    - src/storage/supabase_client.py - DB operations for chunks
    - src/api/routes/webhooks.py - Webhook endpoints
    - migrations/00015_create_document_chunks_table.sql - Chunks table
  e3-4-generate-embeddings-for-semantic-search: done
  e3-4-jira-id: SCRUM-34
  e3-4-drafted: 2025-11-27
  e3-4-context-ready: 2025-11-27
  e3-4-completed: 2025-11-27
  e3-4-notes: |
    Embedding generation completed. Key deliverables:
    - OpenAI embedding client with text-embedding-3-large (3072 dims)
    - Batch processing with retry logic and token tracking
    - generate_embeddings job handler with pipeline integration
    - Similarity search API: GET /api/search/similar
    - 37 tests passing with 86% coverage
    Key files:
    - src/embeddings/openai_client.py - OpenAI embedding client
    - src/jobs/handlers/generate_embeddings.py - Job handler
    - src/api/routes/search.py - Similarity search API
    - migrations/00016_update_embedding_dimension.sql - Vector dimensions
  e3-5-implement-llm-analysis-with-gemini-25-tiered: done
  e3-5-jira-id: SCRUM-35
  e3-5-drafted: 2025-11-27
  e3-5-context-ready: 2025-11-27
  e3-5-completed: 2025-11-27
  e3-5-reviewed: 2025-11-27
  e3-5-notes: |
    LLM analysis with Gemini 2.5 tiered models completed. Key deliverables:
    - GeminiClient with LangChain integration and tiered model support (Flash/Pro/Lite)
    - Model selection based on document type (Pro for Excel, Flash default)
    - M&A-specific finding extraction prompts with structured output
    - analyze_document job handler with atomic findings storage
    - 62 tests passing
    Code review APPROVED - all 6 ACs verified, no issues found.
    Key files:
    - src/llm/client.py - GeminiClient with retry logic
    - src/llm/models.py - ModelTier enum and selection
    - src/llm/prompts.py - M&A extraction prompts
    - src/models/findings.py - Finding Pydantic models
    - src/jobs/handlers/analyze_document.py - Job handler
    - migrations/00017_update_findings_for_llm_analysis.sql - Schema update
  e3-6-create-processing-status-tracking-and-websocket-updates: done
  e3-6-jira-id: SCRUM-36
  e3-6-drafted: 2025-11-27
  e3-6-context-ready: 2025-11-27
  e3-6-completed: 2025-11-27
  e3-6-notes: |
    Processing status tracking and WebSocket updates completed. Key deliverables:
    - ProcessingStatusBadge component with all granular statuses
    - ProcessingProgress component showing pipeline stages
    - useDocumentUpdates Supabase Realtime hook
    - Real-time connection status indicator in Data Room
    - Toast notifications for completion/failure
    - Enhanced DocumentDetails panel with retry button
    - /api/documents/[id]/retry API route
    - 207 tests passing
  e3-7-implement-processing-queue-visibility: done
  e3-7-drafted: 2025-11-27
  e3-7-context-ready: 2025-11-27
  e3-7-completed: 2025-11-27
  e3-7-jira-id: SCRUM-37
  e3-7-notes: |
    Processing queue visibility implemented. Key deliverables:
    - FastAPI endpoints: GET /api/processing/queue, DELETE /api/processing/queue/{job_id}
    - Next.js proxy routes for queue operations
    - ProcessingQueue collapsible panel component with real-time updates
    - QueueItem component with cancel/retry actions
    - useProcessingQueue hook with polling
    - Integrated into Data Room above document list
    - Tests for components, hooks, and API endpoints
  e3-8-implement-retry-logic-for-failed-processing: done
  e3-8-drafted: 2025-11-27
  e3-8-context-ready: 2025-11-27
  e3-8-completed: 2025-11-27
  e3-8-jira-id: SCRUM-38
  e3-8-notes: |
    Retry logic for failed processing completed. Key deliverables:
    - ErrorClassifier with transient/permanent error classification
    - ProcessingStage enum for stage-aware retry (parsing → embedding → analyzing)
    - RetryManager with stage tracking, retry history, and rate limiting
    - Manual retry controls: 60s cooldown, 5 total attempts max
    - Stage-aware retry endpoints: /api/processing/retry/embedding, /api/processing/retry/analysis
    - Enhanced UI: structured error display, retry history collapsible, stage-aware retry button
    - 139 tests passing (95 error + 44 retry manager)
    Code review fixes applied:
    - Pattern priority in ErrorClassifier (specific before generic)
    - Error handling in enqueue_stage_retry (prevent inconsistent state)
    - Manual retry rate limiting and total attempt cap
  e3-9-financial-model-integration-extract-and-query-financial-metrics: done
  e3-9-jira-id: SCRUM-39
  e3-9-drafted: 2025-11-27
  e3-9-completed: 2025-11-27
  e3-9-reviewed: 2025-11-27
  e3-9-notes: |
    Financial model integration completed. Key deliverables:
    - Database schema with financial_metrics table and RLS policies
    - FinancialDocumentDetector with EN+DE pattern matching (30.0 confidence threshold)
    - FinancialMetricExtractor parsing tables, values, periods, and formulas
    - extract_financials job handler with retry integration
    - API endpoints for querying metrics by project/document/category
    - 82 tests passing with 87% coverage
    Code review approved: Fixed PDF table financial extraction trigger
  epic-3-retrospective: completed
  epic-3-retrospective-completed: 2025-11-28
  epic-3-notes: |
    All 9 stories completed. Duration: 3 days (Nov 26-28).
    Key deliverables:
    - FastAPI Python backend (manda-processing service)
    - Document parsing with Docling (PDF, Word, Excel)
    - Embeddings with OpenAI text-embedding-3-large (3072 dims)
    - LLM analysis with tiered Gemini 2.5 (Flash/Pro/Lite)
    - Financial metric extraction (EN+DE patterns)
    - Real-time processing status via Supabase Realtime
    - Processing queue visibility with cancel/retry
    - Stage-aware retry logic with error classification
    - 550+ tests with 85-93% backend coverage
    Key patterns established:
    - Job handler pattern with error classification
    - Supabase Realtime subscription hook
    - Stage-aware processing pipeline

  # Epic 4: Collaborative Knowledge Workflow (14 stories)
  # CONTEXTED: 2025-11-28
  # Tech Spec: docs/sprint-artifacts/tech-spec-epic-E4.md
  # Key Decisions:
  # - Knowledge Explorer as analyst's primary workspace
  # - Findings Browser with table/card views, semantic search
  # - Contradiction detection via Neo4j CONTRADICTS relationships
  # - Gap analysis against IRL requirements
  # - New tables: contradictions (findings already exists)
  # - Dependencies: @tanstack/react-table, exceljs, csv-stringify
  epic-4: contexted
  epic-4-jira-id: SCRUM-47
  epic-4-contexted: 2025-11-28
  epic-4-tech-spec: docs/sprint-artifacts/tech-spec-epic-E4.md
  e4-1-build-knowledge-explorer-ui-main-interface: done
  e4-1-jira-id: SCRUM-48
  e4-1-drafted: 2025-11-28
  e4-1-context-ready: 2025-11-28
  e4-1-completed: 2025-11-28
  e4-1-notes: |
    Knowledge Explorer UI main interface completed. Key deliverables:
    - Database migration 00021: Added status and validation_history columns to findings
    - API route /api/projects/[id]/findings with GET/POST, Zod validation, pagination
    - TypeScript types in lib/types/findings.ts with helper functions
    - Client service in lib/api/findings.ts for data fetching
    - Knowledge Explorer page with tab navigation (Findings, Contradictions, Gap Analysis)
    - FindingsBrowser with @tanstack/react-table DataTable
    - Filter controls: document, domain, confidence range, status filters
    - Shared badge components: ConfidenceBadge, DomainTag, StatusBadge
    - 22 component tests for FindingsTable (rendering, pagination, sorting, actions, accessibility)
    - Build passing with no TypeScript errors
  e4-2-implement-semantic-search-for-findings: done
  e4-2-drafted: 2025-11-28
  e4-2-jira-id: SCRUM-49
  e4-2-completed: 2025-11-28
  e4-2-reviewed: 2025-11-28
  e4-2-notes: |
    Semantic search for findings completed and reviewed. Key deliverables:
    - Embedding service (lib/services/embeddings.ts) with OpenAI text-embedding-3-large
    - LRU cache for query embeddings with retry logic
    - Database migration 00022: Updated findings.embedding to vector(3072), created HNSW index
    - match_findings RPC function for pgvector cosine similarity search with filters
    - Search API endpoint POST /api/projects/[id]/findings/search
    - FindingSearch component with debounced input (300ms), Enter/Escape keys
    - FindingsBrowser integration with URL state (?q= parameter)
    - SimilarityBadge component for search results
    - 37 tests (14 embedding service + 23 FindingSearch component)
    - Build passing, all story tests passing
    - Migration 00022 applied, Supabase types regenerated
    - Type assertion removed after types regenerated
  e4-3-implement-inline-finding-validation: done
  e4-3-drafted: 2025-11-28
  e4-3-context-ready: 2025-11-28
  e4-3-completed: 2025-11-28
  e4-3-jira-id: SCRUM-50
  e4-3-notes: |
    Inline finding validation completed. Key deliverables:
    - Validate API endpoint POST /api/projects/[id]/findings/[findingId]/validate
    - PATCH API endpoint for editing findings text/status
    - FindingActions component with validate/reject/edit buttons
    - InlineEdit component with keyboard shortcuts (Enter save, Escape cancel)
    - useUndoValidation hook with 5-second undo window
    - Integration with FindingsBrowser and optimistic UI updates
    - Toast notifications with undo action
    - 56 tests passing (FindingActions, InlineEdit, useUndoValidation, validate API)
  e4-4-build-card-view-alternative-for-findings: backlog
  e4-4-jira-id: SCRUM-51
  e4-5-implement-source-attribution-links: backlog
  e4-5-jira-id: SCRUM-52
  e4-6-build-contradictions-view: backlog
  e4-6-jira-id: SCRUM-53
  e4-7-detect-contradictions-using-neo4j: backlog
  e4-7-jira-id: SCRUM-54
  e4-8-build-gap-analysis-view: backlog
  e4-8-jira-id: SCRUM-55
  e4-9-implement-finding-detail-view-with-full-context: backlog
  e4-9-jira-id: SCRUM-56
  e4-10-implement-export-findings-to-csv-excel: backlog
  e4-10-jira-id: SCRUM-57
  e4-11-implement-contradiction-detection-and-flagging: backlog
  e4-11-jira-id: SCRUM-58
  e4-12-build-bulk-actions-for-finding-management: backlog
  e4-12-jira-id: SCRUM-59
  e4-13-implement-export-findings-feature-advanced: backlog
  e4-13-jira-id: SCRUM-60
  e4-14-build-real-time-knowledge-graph-updates: backlog
  e4-14-jira-id: SCRUM-61
  epic-4-retrospective: optional

  # Epic 5: Conversational Assistant (9 stories)
  # Key Components:
  # - Claude Sonnet 4.5 via LangChain ChatAnthropic adapter
  # - LangGraph for conversation workflow orchestration
  # - 11 chat tools for knowledge querying
  # - WebSocket for real-time streaming responses
  epic-5: backlog
  e5-1-integrate-claude-sonnet-via-langchain: backlog
  e5-2-implement-langchain-agent-with-11-chat-tools: backlog
  e5-3-build-chat-interface-with-conversation-history: backlog
  e5-4-implement-source-citation-display-in-messages: backlog
  e5-5-implement-quick-actions-and-suggested-followups: backlog
  e5-6-add-conversation-context-and-multi-turn-support: backlog
  e5-7-implement-confidence-indicators-and-uncertainty-handling: backlog
  e5-8-implement-chat-export-functionality: backlog
  e5-9-implement-document-upload-via-chat-interface: backlog
  epic-5-retrospective: optional

  # Epic 6: IRL Management & Auto-Generation (8 stories)
  epic-6: backlog
  e6-1-build-irl-builder-ui-with-template-selection: backlog
  e6-2-implement-irl-creation-and-editing: backlog
  e6-3-implement-ai-assisted-irl-auto-generation-from-documents: backlog
  e6-4-implement-data-room-folder-structure-auto-generation-from-irl: backlog
  e6-5-implement-irl-document-linking-and-progress-tracking: backlog
  e6-6-build-irl-export-functionality-excel-csv: backlog
  e6-7-implement-irl-templates-library: backlog
  e6-8-build-irl-checklist-progress-visualization: backlog
  epic-6-retrospective: optional

  # Epic 7: Learning Loop (6 stories)
  epic-7: backlog
  e7-1-implement-feedback-capture-mechanism: backlog
  e7-2-build-feedback-storage-and-analysis-pipeline: backlog
  e7-3-implement-prompt-optimization-based-on-feedback: backlog
  e7-4-build-feedback-analytics-dashboard: backlog
  e7-5-implement-pattern-recognition-from-corrections: backlog
  e7-6-build-feedback-export-for-model-fine-tuning: backlog
  epic-7-retrospective: optional

  # Epic 8: Q&A Co-Creation Workflow (8 stories)
  epic-8: backlog
  e8-1-build-qa-list-builder-ui: backlog
  e8-2-implement-ai-assisted-question-generation: backlog
  e8-3-implement-answer-drafting-with-source-citations: backlog
  e8-4-build-collaborative-qa-editing-workflow: backlog
  e8-5-implement-qa-organization-and-categorization: backlog
  e8-6-build-qa-export-word-pdf: backlog
  e8-7-implement-qa-version-control: backlog
  e8-8-build-qa-templates-library: backlog
  epic-8-retrospective: optional

  # Epic 9: CIM Company Overview Creation (CIM v3 Workflow) (9 stories)
  epic-9: backlog
  e9-1-cim-workflow-database-schema-and-state-management: backlog
  e9-2-cim-builder-ui-with-workflow-progress-visualization-and-live-preview: backlog
  e9-3-agent-tool-suggest-narrative-outline: backlog
  e9-4-langgraph-cim-v3-workflow-implementation-14-phases: backlog
  e9-5-content-first-then-visual-workflow: backlog
  e9-6-extreme-visual-precision-generation-and-validation: backlog
  e9-7-continuous-balance-checks-and-coherence-validation: backlog
  e9-8-non-linear-workflow-and-special-commands: backlog
  e9-9-multi-format-export-with-rag-source-citations: backlog
  epic-9-retrospective: optional
