---
phase: 04-wireframe-preview
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - manda-app/components/cim-builder/PreviewPanel/ComponentRenderer.tsx
  - manda-app/components/cim-builder/PreviewPanel/WireframeComponentRenderer.tsx
  - manda-app/components/cim-builder/PreviewPanel/SlidePreview.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "All slide previews render with white/transparent backgrounds only"
    - "All borders and outlines are gray (no green/yellow/blue/red colors)"
    - "Chart/image/table placeholders show dashed gray boxes with icons"
    - "Text renders in black/dark gray with proper hierarchy"
    - "Click-to-reference still works on all components"
  artifacts:
    - path: "manda-app/components/cim-builder/PreviewPanel/ComponentRenderer.tsx"
      provides: "Main component renderer with grayscale styling"
      contains: "getMetricStyle"
    - path: "manda-app/components/cim-builder/PreviewPanel/WireframeComponentRenderer.tsx"
      provides: "Wireframe component renderer with grayscale emphasisColors"
      contains: "emphasisColors"
    - path: "manda-app/components/cim-builder/PreviewPanel/SlidePreview.tsx"
      provides: "Slide preview container with grayscale badges"
      contains: "narrativeRoleColors"
  key_links:
    - from: "SlidePreview.tsx"
      to: "ComponentRenderer.tsx"
      via: "component rendering"
      pattern: "<ComponentRenderer"
    - from: "ComponentRenderer.tsx"
      to: "ClickableWrapper"
      via: "click handler propagation"
      pattern: "onClick\\?\\."
---

<objective>
Transform CIM slide preview from colored components to clean grayscale wireframes.

Purpose: Current preview uses colored backgrounds (green/yellow/blue/red) for emphasis states that cause "weird visuals" in content slides. Clean wireframe styling makes previews easier to read and debug.

Output: All three renderer files updated to use white/transparent backgrounds with gray borders only.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@manda-app/components/cim-builder/PreviewPanel/ComponentRenderer.tsx
@manda-app/components/cim-builder/PreviewPanel/WireframeComponentRenderer.tsx
@manda-app/components/cim-builder/PreviewPanel/SlidePreview.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert ComponentRenderer.tsx to grayscale</name>
  <files>manda-app/components/cim-builder/PreviewPanel/ComponentRenderer.tsx</files>
  <action>
Update ComponentRenderer.tsx to remove colored styling:

1. **getMetricStyle function (lines 498-507)**: Replace colored emphasis styles with grayscale:
   - Remove success/warning/danger/accent colored backgrounds
   - All cases should return grayscale: `'bg-white border-gray-300'` or `'bg-gray-50 border-gray-200'`
   - Keep border styling but make it gray only

2. **CalloutRenderer (lines 619-631)**: Remove colored callout backgrounds:
   - Change `bg-amber-50 border-amber-500` to `bg-gray-50 border-gray-300`
   - Change `bg-blue-50 border-blue-500` to `bg-gray-50 border-gray-300`
   - Change `bg-muted border-primary` to `bg-gray-50 border-gray-300`

3. **MetricRenderer (line 463)**: Ensure the metric container uses grayscale:
   - The getMetricStyle call will be fixed by step 1
   - Verify the primary/5 background in the fallback (line 452) becomes gray

4. **ProcessRenderer (lines 677-713)**: Change colored process boxes:
   - Line 687: Change `bg-primary/10 border-primary/30` to `bg-gray-50 border-gray-300`
   - Line 704: Change `bg-primary/20 border border-primary/30` to `bg-gray-100 border-gray-300`

5. **TimelineRenderer (lines 558-597)**: Change timeline styling:
   - Line 570: Change `bg-primary/30 border-2 border-primary/50` to `bg-gray-200 border-2 border-gray-400`
   - Line 587: Change `bg-primary` to `bg-gray-400`
   - Line 584: Change `border-primary/30` to `border-gray-300`

6. **BulletRenderer/BulletListRenderer**: Change bullet color:
   - Line 173: Change `text-primary` to `text-gray-600`
   - Line 517: Change `text-primary` to `text-gray-600`

7. **NumberedListRenderer** (line 534): Change number color:
   - Change `text-primary` to `text-gray-600`

Do NOT change:
- The ClickableWrapper hover states (hover:bg-primary/5) - these are interactive feedback, not content styling
- The data-component-id or data-testid attributes
- The onClick handler logic
  </action>
  <verify>
Run TypeScript check: `cd manda-app && npm run type-check`
Verify no colored class names remain for backgrounds: grep for bg-green, bg-yellow, bg-blue, bg-red, bg-amber, bg-primary (except hover states)
  </verify>
  <done>
ComponentRenderer uses only white/gray/transparent backgrounds for all component types. No colored emphasis states remain.
  </done>
</task>

<task type="auto">
  <name>Task 2: Convert WireframeComponentRenderer.tsx to grayscale</name>
  <files>manda-app/components/cim-builder/PreviewPanel/WireframeComponentRenderer.tsx</files>
  <action>
Update WireframeComponentRenderer.tsx to remove colored styling:

1. **emphasisColors object (lines 62-70)**: Replace all colored values with grayscale:
   ```typescript
   const emphasisColors: Record<NonNullable<ComponentStyle['emphasis']>, string> = {
     primary: 'border-gray-300 bg-white',
     secondary: 'border-gray-300 bg-white',
     muted: 'border-gray-200 bg-gray-50',
     accent: 'border-gray-300 bg-white',
     success: 'border-gray-300 bg-white',
     warning: 'border-gray-300 bg-white',
     danger: 'border-gray-300 bg-white',
   }
   ```

2. **MetricComponent (lines 232-241)**: Change primary color to gray:
   - Line 238: Change `text-primary` to `text-gray-900`

3. **StatHighlightComponent (lines 328-336)**: Remove gradient, use flat gray:
   - Line 331: Change `bg-gradient-to-br from-primary/10 to-primary/5` to `bg-gray-50`
   - Line 332: Change `text-primary` to `text-gray-900`

4. **KeyTakeawayComponent (lines 338-345)**: Change accent to gray:
   - Line 340: Change `bg-accent/10 border border-accent/30` to `bg-gray-50 border border-gray-300`
   - Line 341: Change `text-accent` to `text-gray-500`

5. **CalloutComponent (lines 319-326)**: Change primary to gray:
   - Line 321: Change `border-primary bg-primary/5` to `border-gray-300 bg-gray-50`
   - Line 322: Change `text-primary` to `text-gray-500`

6. **TimelineComponent (lines 270-286)**: Change primary to gray:
   - Line 276: Change `bg-primary/10` to `bg-gray-100`

7. **ProcessStepsComponent (lines 288-302)**: Change step number styling:
   - Line 294: Change `bg-primary text-primary-foreground` to `bg-gray-400 text-white`

8. **BulletListComponent (line 174)**: Change bullet color:
   - Change `text-primary` to `text-gray-600`

9. **NumberedListComponent (line 188)**: Change number color:
   - Change `text-primary` to `text-gray-600`

10. **QuoteComponent (line 198)**: Change quote border:
    - Change `border-primary/50` to `border-gray-300`

Do NOT change:
- The ClickableWrapper hover states (hover:bg-primary/5)
- The data-component-id attributes
- The onClick handler logic
  </action>
  <verify>
Run TypeScript check: `cd manda-app && npm run type-check`
Verify no colored class names remain: grep for bg-green, bg-yellow, bg-blue, bg-red, bg-accent, bg-primary (except hover states)
  </verify>
  <done>
WireframeComponentRenderer uses only white/gray/transparent backgrounds. All emphasisColors map to grayscale.
  </done>
</task>

<task type="auto">
  <name>Task 3: Convert SlidePreview.tsx badges to grayscale</name>
  <files>manda-app/components/cim-builder/PreviewPanel/SlidePreview.tsx</files>
  <action>
Update SlidePreview.tsx to remove colored badges:

1. **statusStyles object (lines 47-51)**: Convert to grayscale:
   ```typescript
   const statusStyles = {
     draft: 'bg-gray-100 text-gray-600',
     approved: 'bg-gray-200 text-gray-700',
     locked: 'bg-gray-100 text-gray-500',
   }
   ```

2. **LayoutBadge (lines 96-106)**: Change from blue to gray:
   - Line 99: Change `bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400` to `bg-gray-100 text-gray-700`

3. **narrativeRoleColors object (lines 159-167)**: Convert all roles to grayscale:
   ```typescript
   const narrativeRoleColors: Record<NarrativeRole, string> = {
     introduction: 'bg-gray-100 text-gray-700',
     context: 'bg-gray-100 text-gray-700',
     evidence: 'bg-gray-100 text-gray-700',
     analysis: 'bg-gray-100 text-gray-700',
     implications: 'bg-gray-100 text-gray-700',
     projections: 'bg-gray-100 text-gray-700',
     conclusion: 'bg-gray-100 text-gray-700',
   }
   ```

4. **Visual concept border (line 291)**: Change blue border to gray:
   - Change `border-blue-300 dark:border-blue-700` to `border-gray-400`

5. **Visual concept indicator (line 375)**: Change blue text to gray:
   - Change `text-blue-600 dark:text-blue-400` to `text-gray-600`

Do NOT change:
- The onComponentClick handler
- The data-slide-id, data-testid attributes
- The buildComponentIndices function
- The core layout logic
  </action>
  <verify>
Run TypeScript check: `cd manda-app && npm run type-check`
Verify no colored badge classes remain: grep for bg-yellow, bg-green, bg-blue, bg-purple, bg-emerald, bg-amber, bg-cyan, bg-indigo, bg-rose
  </verify>
  <done>
SlidePreview uses grayscale badges for status, layout type, and narrative role. No colored indicator styling remains.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **TypeScript compilation:**
   ```bash
   cd manda-app && npm run type-check
   ```

2. **Visual verification - check no colored backgrounds:**
   ```bash
   cd manda-app
   grep -E "bg-(green|yellow|blue|red|amber|purple|emerald|cyan|indigo|rose)" components/cim-builder/PreviewPanel/*.tsx | grep -v "hover:" | grep -v "//"
   ```
   Should return empty (no matches).

3. **Verify click handlers preserved:**
   ```bash
   grep -E "onClick\\?\\." components/cim-builder/PreviewPanel/ComponentRenderer.tsx
   grep -E "onClick\\?\\." components/cim-builder/PreviewPanel/WireframeComponentRenderer.tsx
   ```
   Should return matches showing click handlers are intact.

4. **Verify component IDs preserved:**
   ```bash
   grep "data-component-id" components/cim-builder/PreviewPanel/ComponentRenderer.tsx
   grep "data-component-id" components/cim-builder/PreviewPanel/WireframeComponentRenderer.tsx
   ```
   Should return matches showing IDs are intact.
</verification>

<success_criteria>
- All STYLE-* requirements met: white/transparent backgrounds, gray borders, black/gray text
- All PLACE-* requirements met: dashed gray placeholders with icons (already compliant, just color changes)
- All TEXT-* requirements met: proper text hierarchy with grayscale colors
- All KEEP-* requirements met: click-to-reference and component IDs intact
- TypeScript compiles without errors
- No colored backgrounds (green/yellow/blue/red/amber/etc.) except hover states
</success_criteria>

<output>
After completion, create `.planning/phases/04-wireframe-preview/04-01-SUMMARY.md`
</output>
