# Manda Processing Service Configuration
# Copy this file to .env and fill in the values

# Application
APP_ENV=development
DEBUG=true

# Server
HOST=0.0.0.0
PORT=8000

# Database (Supabase PostgreSQL)
# Get these from your Supabase project settings
DATABASE_URL=postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres
SUPABASE_URL=https://[project-ref].supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# pg-boss configuration
PGBOSS_SCHEMA=pgboss

# Neo4j Graph Database (E10.1 - Graphiti)
# Local development: Use docker compose to start Neo4j
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-neo4j-password
NEO4J_DATABASE=neo4j

# Graphiti Configuration (E10.1)
# Concurrency limit to prevent rate limiting during entity extraction
GRAPHITI_SEMAPHORE_LIMIT=10

# API Security
# Generate a secure random key for API authentication
API_KEY=your-secure-api-key
# Webhook secret for Supabase webhooks (optional)
WEBHOOK_SECRET=your-webhook-secret

# Google Cloud Storage
GCS_BUCKET=manda-documents-dev
GCS_PROJECT_ID=your-gcs-project-id
# Path to service account key JSON file
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=console

# OpenAI Embeddings (E3.4)
OPENAI_API_KEY=your-openai-api-key
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSIONS=3072
EMBEDDING_BATCH_SIZE=100

# Google Gemini LLM (E3.5)
# Get API key from Google AI Studio: https://aistudio.google.com/
GOOGLE_API_KEY=your-google-api-key
GEMINI_FLASH_MODEL=gemini-2.5-flash
GEMINI_PRO_MODEL=gemini-2.5-pro
GEMINI_LITE_MODEL=gemini-2.5-flash-lite
LLM_ANALYSIS_BATCH_SIZE=5

# Voyage AI Embeddings (E10.2)
# Get API key from: https://dash.voyageai.com/
# First 200M tokens free per account
# voyage-3.5: Best general-purpose model, outperforms domain-specific models
# Pricing: $0.06/1M tokens (50% cheaper than voyage-finance-2)
# See: https://blog.voyageai.com/2025/05/20/voyage-3-5/
VOYAGE_API_KEY=your-voyage-api-key
VOYAGE_EMBEDDING_MODEL=voyage-3.5
VOYAGE_EMBEDDING_DIMENSIONS=1024

# Voyage AI Reranking (E10.7)
# Uses same API key as embeddings
# rerank-2.5 model: ~$0.05 per 1000 documents
VOYAGE_RERANK_MODEL=rerank-2.5
VOYAGE_RERANK_TOP_K=10

# Retrieval Configuration (E10.7)
# Number of candidates from Graphiti before reranking
RETRIEVAL_NUM_CANDIDATES=50
